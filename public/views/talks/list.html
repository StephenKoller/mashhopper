<section data-ng-controller="TalksController" >
	<h1 class="oleo text-left">Talks</h1>

	<div class="row bottom-margin left-margin">
		<div class="col-md-9">
			<div class="btn-group">
		        <button class="btn btn-default active view-control" rel="tooltip" data-original-title="Grid view" ng-model="displayFormat" ng-class="displayFormatStyle('grid')" ng-click="displayFormat = 'grid'">
		            <i class="glyphicon glyphicon-th"></i>
		        </button>
		        <button class="btn btn-default view-control" rel="tooltip" data-original-title="List view" ng-model="displayFormat" ng-class="displayFormatStyle('list')" ng-click="displayFormat = 'list'">
                	<i class="glyphicon glyphicon-th-list"></i>
				</button>
	        </div>
			<div class="btn-group">
				<button class="btn btn-default btn-sm" ng-click="order = 'Start'" ng-model="radioModel" btn-radio="'Left'">Time</button>
				<button class="btn btn-default btn-sm" ng-click="order = 'Title'" ng-model="radioModel" btn-radio="'MiddleLeft'">Title</button>
				<button class="btn btn-default btn-sm" ng-click="order = 'Technology'" ng-model="radioModel" btn-radio="'Middle'">Technology</button>
				<button class="btn btn-default btn-sm" ng-click="order = 'Speaker'" ng-model="radioModel" btn-radio="'Right'">Speaker</button>
				<button class="btn btn-default btn-sm" ng-click="order = sortByAttending" ng-model="radioModel" btn-radio="'FarRight'">Attending</button>
			</div>
		</div>
		<div class="col-md-3">
           <div id="custom-search-input">
                <div class="input-group col-md-12">
                    <input type="text" class="search-query form-control" placeholder="Search" ng-model="searchTerm"/>
                    <span class="input-group-btn">
                        <button class="btn btn-danger" type="button">
                            <span class=" glyphicon glyphicon-search"></span>
                        </button>
                    </span>
                </div>
            </div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<ul class="grid" masonry="true" ng-show="displayFormat == 'grid'">
		        <li ng-repeat="talk in talks | filter:searchTermWithDelay | orderBy:order" class="talk-brick">
		        	<div class="row">
		        		<div class="col-md-12">
		        		   	<div data-ng-class="style(talk)" class="technology">{{talk.Technology}}</div>
	        		   	</div>
	        		</div>
	        		<div class="row">
	        			<div class="col-md-12 clickable" data-ng-click="openDescription(talk)">
			            	<h4>{{talk.Title}}</h4>
			            </div>
		            </div>
	        		<div class="row">
	        			<div class="col-md-6">
				            <span ng-if="talk.Start">
				            	<span class="label label-default date-label">{{talk.Start | date:['EEEE h:mm a']}}</span>
				            	<br />
				            </span>
				              <span ng-if="talk.Room">
				            	<span class="label label-default date-label">{{talk.Room}}</span>
				            	<br />
				            </span>
				        </div>
				        <div class="col-md-6">
				            <button data-ng-click="update(talk)" class="btn btn-default btn-labeled btn-xs" data-ng-class="{ 'btn-success' : isAttending(talk) }">
				            	<span class="btn-label">
				            		<i class="glyphicon glyphicon-ok" data-ng-class="{ 'glyphicon-ok' : isAttending(talk), 'glyphicon-remove' : !isAttending(talk) }"></i>
			            		</span>
			            		<span ng-switch on="isAttending(talk)">
			            			<span ng-switch-when="true">
			            				Attending
			            			</span>
			            			<span ng-switch-when="false">
			            				Not Attending
			            			</span>
			            		</span>
				            </button>
			            </div>
		            </div>
		        </li>
		    </ul>
            <div class="table-responsive" ng-show="displayFormat == 'list'">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Technology</th>
                            <th>Title</th>
                            <td>Attending</th>
                            <th>Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="talk in talks | filter:searchTermWithDelay | orderBy:order">
                            <td>
                                <span ng-if="talk.Start">
                                    <span class="label label-default date-label">{{talk.Start | date:['EEEE h:mm a']}}</span>
                                </span>
                            </td>
                            <td data-ng-class="style(talk)" class="technology">{{talk.Technology}}</td>
                            <td class="clickable" data-ng-click="openDescription(talk)">
                                <h4>{{talk.Title}}</h4>
                            </td>
                            <td>
                                <button data-ng-click="update(talk)" class="btn btn-default btn-labeled btn-xs" data-ng-class="{ 'btn-success' : isAttending(talk) }">
                                    <span class="btn-label">
                                        <i class="glyphicon glyphicon-ok" data-ng-class="{ 'glyphicon-ok' : isAttending(talk), 'glyphicon-remove' : !isAttending(talk) }"></i>
                                    </span>
                                    <span ng-switch on="isAttending(talk)">
                                        <span ng-switch-when="true">
                                            Attending
                                        </span>
                                        <span ng-switch-when="false">
                                            Not Attending
                                        </span>
                                    </span>
                                </button>
                            </td>

                            <td><span ng-if="talk.Room">
                                <span class="label label-default date-label">{{talk.Room}}</span></td>
                        </tr>
                    </tbody>
                </table>
		</div>
	</div>
</section>
